<!DOCTYPE html>
<html dir="ltr" class="js desktop" lang="en"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>orm_faq [Ujorm]</title>
    <script>(function(H){H.className=H.className.replace(/\bno-js\b/,'js')})(document.documentElement)</script>
    <meta name="generator" content="DokuWiki">
<meta name="robots" content="index,follow">
<meta name="keywords" content="orm_faq">
<link rel="search" type="application/opensearchdescription+xml" href="http://ujorm.org/dokuwiki/lib/exe/opensearch.php" title="Ujorm">
<link rel="start" href="http://ujorm.org/dokuwiki/">
<link rel="contents" href="http://ujorm.org/dokuwiki/doku.php?id=orm_faq&amp;do=index" title="Sitemap">
<link rel="alternate" type="application/rss+xml" title="Recent changes" href="http://ujorm.org/dokuwiki/feed.php">
<link rel="alternate" type="application/rss+xml" title="Current namespace" href="http://ujorm.org/dokuwiki/feed.php?mode=list&amp;ns=">
<link rel="edit" title="Edit this page" href="http://ujorm.org/dokuwiki/doku.php?id=orm_faq&amp;do=edit">
<link rel="alternate" type="text/html" title="Plain HTML" href="http://ujorm.org/dokuwiki/doku.php?do=export_xhtml&amp;id=orm_faq">
<link rel="alternate" type="text/plain" title="Wiki Markup" href="http://ujorm.org/dokuwiki/doku.php?do=export_raw&amp;id=orm_faq">
<link rel="canonical" href="http://ujorm.org/dokuwiki/doku.php?id=orm_faq">
<link rel="stylesheet" type="text/css" href="css/css.css">
<script type="text/javascript">/*<![CDATA[*/var NS='';var JSINFO = {"id":"orm_faq","namespace":""};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="css/js.php"></script>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="shortcut icon" href="http://ujorm.org/dokuwiki/lib/tpl/dokuwiki/images/favicon.ico">
<link rel="apple-touch-icon" href="http://ujorm.org/dokuwiki/lib/tpl/dokuwiki/images/apple-touch-icon.png">
    </head>

<body>
    <!--[if lte IE 7 ]><div id="IE7"><![endif]--><!--[if IE 8 ]><div id="IE8"><![endif]-->
    <div id="dokuwiki__site"><div id="dokuwiki__top" class="site dokuwiki mode_show tpl_dokuwiki     ">


<!-- ********** HEADER ********** -->
<div id="dokuwiki__header"><div class="pad group">


    <div class="headings group">
        <ul class="a11y skip">
            <li><a href="#dokuwiki__content">skip to content</a></li>
        </ul>

        <h1><a href="http://ujorm.org/dokuwiki/doku.php?id=start" accesskey="h" title="[H]"><img src="css/logo.png" alt="" height="64" width="64"> <span>Ujorm</span></a></h1>
            </div>

    <div class="tools group">
        <!-- USER TOOLS -->
                    <div id="dokuwiki__usertools">
                <h3 class="a11y">User Tools</h3>
                <ul>
                    <li><a href="http://ujorm.org/dokuwiki/doku.php?id=orm_faq&amp;do=login&amp;sectok=b2fcb04199972c7f52ca0d57fc9c04f6" class="action login" rel="nofollow" title="Login">Login</a></li>                </ul>
            </div>

        <!-- SITE TOOLS -->
        <div id="dokuwiki__sitetools">
            <h3 class="a11y">Site Tools</h3>
            <form action="/dokuwiki/doku.php?id=start" accept-charset="utf-8" class="search" id="dw__search" method="get" role="search"><div class="no"><input name="do" value="search" type="hidden"><input id="qsearch__in" accesskey="f" name="id" class="edit" title="[F]" type="text"><input value="Search" class="button" title="Search" type="submit"><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>            <div class="mobileTools">
                <form action="/dokuwiki/doku.php" method="get" accept-charset="utf-8"><div class="no"><input name="id" value="orm_faq" type="hidden"><select name="do" class="edit quickselect" title="Tools"><option selected="selected" value="">Tools</option><optgroup label="Page Tools"><option value="edit">Edit this page</option><option value="revisions">Old revisions</option><option value="backlink">Backlinks</option></optgroup><optgroup label="Site Tools"><option value="recent">Recent changes</option><option value="media">Media Manager</option><option value="index">Sitemap</option></optgroup><optgroup label="User Tools"><option value="login">Login</option></optgroup></select><input style="display: none;" value="&gt;" type="submit"></div></form>            </div>
            <ul>
                <li><a href="http://ujorm.org/dokuwiki/doku.php?id=orm_faq&amp;do=recent" class="action recent" accesskey="r" rel="nofollow" title="Recent changes [R]">Recent changes</a></li><li><a href="http://ujorm.org/dokuwiki/doku.php?id=orm_faq&amp;do=media&amp;ns=" class="action media" rel="nofollow" title="Media Manager">Media Manager</a></li><li><a href="http://ujorm.org/dokuwiki/doku.php?id=orm_faq&amp;do=index" class="action index" accesskey="x" rel="nofollow" title="Sitemap [X]">Sitemap</a></li>            </ul>
        </div>

    </div>

    <!-- BREADCRUMBS -->
            <div class="breadcrumbs">
                                        <div class="trace"><span class="bchead">Trace:</span> <span class="bcsep">•</span> <bdi><a href="http://ujorm.org/dokuwiki/doku.php?id=start" class="breadcrumbs" title="start">start</a></bdi> <span class="bcsep">•</span> <bdi><a href="http://ujorm.org/dokuwiki/doku.php?id=core_faq" class="breadcrumbs" title="core_faq">core_faq</a></bdi> <span class="bcsep">•</span> <bdi><a href="http://ujorm.org/dokuwiki/doku.php?id=orm" class="breadcrumbs" title="orm">orm</a></bdi> <span class="bcsep">•</span> <bdi><a href="http://ujorm.org/dokuwiki/doku.php?id=orm_supported_database" class="breadcrumbs" title="orm_supported_database">orm_supported_database</a></bdi> <span class="bcsep">•</span> <span class="curid"><bdi><a href="http://ujorm.org/dokuwiki/doku.php?id=orm_faq" class="breadcrumbs" title="orm_faq">orm_faq</a></bdi></span></div>
                    </div>


    <hr class="a11y">
</div></div><!-- /header -->

        <div class="wrapper group">


            <!-- ********** CONTENT ********** -->
            <div id="dokuwiki__content"><div class="pad group">

                <div class="pageId"><span>orm_faq</span></div>

                <div class="page group">
                                                            <!-- wikipage start -->

<h3 class="sectionedit1" id="the_frequently_asked_questions">The Frequently Asked Questions</h3>
<div class="level3">

<p>
Q: How to create a support for a new database?<br>

A: Create a child of the SqlDialect class and refer it by annotation in
you configuration database class. The new class can have overwrited some
 methods for buidling sql statements. See the <a href="http://ujorm.org/dokuwiki/doku.php?id=orm_supported_database" class="wikilink1" title="orm_supported_database"> supported databases </a> too.
</p>

<p>
Q: How to specify a database connection?<br>

A: There are three ways how to manage the database connection:
</p>
<ul>
<li class="level1"><div class="li"> use connection parameters directly by the annotation 'Db':<pre class="code java">@Db<span class="br0">(</span>user<span class="sy0">=</span><span class="st0">"sa"</span>, password<span class="sy0">=</span><span class="st0">"xxx"</span>, jdbcUrl<span class="sy0">=</span><span class="st0">"jdbc:h2:mem:db1"</span> ...<span class="br0">)</span>
<span class="kw1">public</span> <span class="kw1">class</span> Database ...</pre>
</div>
</li>
<li class="level1"><div class="li"> or use the JNDI by the sample:<pre class="code java">@Db<span class="br0">(</span>jndi<span class="sy0">=</span><span class="st0">"jdbc/MyDatabase"</span>, ...<span class="br0">)</span>
<span class="kw1">public</span> <span class="kw1">class</span> Database ...</pre>

<p>
Note: annotation attributes can be overwrited by a XML config file
</p>
</div>
</li>
<li class="level1"><div class="li"> you can to create special database connections (using dynamical parameters e.g.) in your method <a href="http://ujorm.org/javadoc/index.html?org/ujorm/orm/package-summary.html" class="urlextern" title="http://ujorm.org/javadoc/index.html?org/ujorm/orm/package-summary.html" rel="nofollow"> createConnection(…)</a> in a child class of the SqlDialect. The implementation of this method has a higher priority, such as annotations.</div>
</li>
</ul>

<p>
Q: How works a sequence for a table primary key?<br>

A: Ujorm uses its own table to store the current sequence value for each table - by default.
</p>

<p>
Q: I would like to write myself primary key instead of a sequence generator. How do I do?<br>

A: Simply assign your own value into primary key. If the value of the PK
 is not NULL, the framework does not call the sequence generator.
</p>

<p>
Q: Are there supported a native database sequence?<br>

A: No by default. However you can create a subclass of UjoSequencer with a support of a native database sequence as you like.
This solution can use an annotation <code>'@sequence</code>' that was created for this purpose.
</p>

<p>
Q: Is supported an object cache?<br>

A: Yes, however the cache is supported only for objects related via foreign key.
</p>

<p>
Q: Does <code>'repeated database select</code>' return the same object instances ?<br>

A: No. A relation <code>'many to one</code>' can return the same object from a cache, however this behavior is not guaranteed.
</p>

<p>
Q: May a result of database query be a List object?<br>

A: The request result is always instance of a <code>'UjoIterator</code>' so you can use <code>'toList()</code>' method to providing the List type.
</p>

<p>
Q: Do persistent object have some states?<br>

A: The object has no states, only a session. The assigned session is
necessary for  loading a lazy relation and for accounting of modified
properties.
</p>

<p>
Q: How to build a multi-table query ?<br>

A: Use a  <a href="http://ujorm.org/javadoc/org/ujorm/extensions/PathProperty.html" class="urlextern" title="http://ujorm.org/javadoc/org/ujorm/extensions/PathProperty.html" rel="nofollow"> composed</a>
 property
to create the query. The new instance can be created dynamically or can
be referenced like a static field of the basic entity - it is your
option. <br>

See the next example for a composed relation: <code>'item.order.created</code>' :
</p>
<pre class="code java"> UjoProperty<span class="sy0">&lt;</span>Item,Date<span class="sy0">&gt;</span> ORDER_CREATED <span class="sy0">=</span> Item.<span class="me1">ORDER</span>.<span class="me1">add</span><span class="br0">(</span>Order.<span class="me1">CREATED</span><span class="br0">)</span><span class="sy0">;</span>
 Criterion<span class="sy0">&lt;</span>Item<span class="sy0">&gt;</span> cn <span class="sy0">=</span> Criterion.<span class="me1">newInstance</span><span class="br0">(</span>ORDER_CREATED, <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+date"><span class="kw3">Date</span></a><span class="br0">(</span><span class="br0">)</span><span class="br0">)</span><span class="sy0">;</span></pre>

<p>
Q: Can I read or write a value by the <a href="http://ujorm.org/javadoc/org/ujorm/extensions/PathProperty.html" class="urlextern" title="http://ujorm.org/javadoc/org/ujorm/extensions/PathProperty.html" rel="nofollow"> composed</a> property ?<br>

A: Yes, of course, see the next example:
</p>
<pre class="code java"> UjoProperty<span class="sy0">&lt;</span>Item,Date<span class="sy0">&gt;</span> ORDER_CREATED <span class="sy0">=</span> Item.<span class="me1">ORDER</span>.<span class="me1">add</span><span class="br0">(</span>Order.<span class="me1">CREATED</span><span class="br0">)</span><span class="sy0">;</span>
 <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+date"><span class="kw3">Date</span></a> date <span class="sy0">=</span> item.<span class="me1">get</span><span class="br0">(</span>ORDER_CREATED<span class="br0">)</span><span class="sy0">;</span></pre>

<p>
Q: How to join a table to itself ?<br>

A: Map the <code>'entity</code>' to a native SQL query by a @View annotation. I'll try to develop some alternative way in a future release.
</p>

<p>
Q: How works transaction?<br>

A: All database DML statements can be seen as temporary until they are
committed. Ujorm supports commitment with the Ujorm Session.commit(). <br>

Method Session.rollback() is used to remove operations performed since
the previous commit or rollback. Use this method when an exception
occurs or when the program detects some error condition or error in the
data. For a concurrency transaction use a next session.<br>

See a JDBC 2.0 documentation for more information.
</p>

<p>
Q: Is allowed to override a part of ORM code mapping by a XML file?<br>

A: Yes, the code and XML configuration approaches can be combined
together, however the XML configuraton will have a higher weight.
</p>

<p>
Q: How to configure the Ujorm?<br>

A: Behavior frameworu can affect the parameters to be used before loading the meta-model. See the <a href="http://ujorm.org/javadoc/org/ujorm/orm/metaModel/MetaParams.html" class="urlextern" title="http://ujorm.org/javadoc/org/ujorm/orm/metaModel/MetaParams.html" rel="nofollow"> full list of parameters</a> or see the next sample of use:
</p>
<pre class="code java"> MetaParams params <span class="sy0">=</span> <span class="kw1">new</span> MetaParams<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
 MetaParams.<span class="me1">CHECK_KEYWORDS</span>.<span class="me1">setValue</span><span class="br0">(</span>params, CheckReport.<span class="me1">EXCEPTION</span><span class="br0">)</span><span class="sy0">;</span>
 OrmHandler handler <span class="sy0">=</span> <span class="kw1">new</span> OrmHandler<span class="br0">(</span><span class="br0">)</span><span class="sy0">;</span>
 handler.<span class="me1">config</span><span class="br0">(</span>params<span class="br0">)</span><span class="sy0">;</span></pre>

<p>
Q: How to map a special user object to a database column? <br>

A: Create a child class of the TypeSevice with your mapping and assign the class by the parameter <a href="http://ujorm.org/javadoc/org/ujorm/orm/metaModel/MetaParams.html#TYPE_SERVICE" class="urlextern" title="http://ujorm.org/javadoc/org/ujorm/orm/metaModel/MetaParams.html#TYPE_SERVICE" rel="nofollow"> TYPE_SERVICE</a>. <br>

If you prefer mapping the user object (include Enum) to VARCHAR type, so
 it is sufficient to implement the interface ValueExportable (since
version 0.94).
</p>

</div>

                    <!-- wikipage stop -->
                                    </div>

                <div class="docInfo"><bdi>orm_faq.txt</bdi> · Last modified: 2010/04/01 19:00 (external edit)</div>

                            </div></div><!-- /content -->

            <hr class="a11y">

            <!-- PAGE ACTIONS -->
            <div id="dokuwiki__pagetools">
                <h3 class="a11y">Page Tools</h3>
                <div class="tools">
                    <ul>
                        <li><a href="http://ujorm.org/dokuwiki/doku.php?id=orm_faq&amp;do=edit" class="action edit" accesskey="e" rel="nofollow" title="Edit this page [E]"><span>Edit this page</span></a></li><li><a href="http://ujorm.org/dokuwiki/doku.php?id=orm_faq&amp;do=revisions" class="action revs" accesskey="o" rel="nofollow" title="Old revisions [O]"><span>Old revisions</span></a></li><li><a href="http://ujorm.org/dokuwiki/doku.php?id=orm_faq&amp;do=backlink" class="action backlink" rel="nofollow" title="Backlinks"><span>Backlinks</span></a></li><li><a href="#dokuwiki__top" class="action top" accesskey="t" rel="nofollow" title="Back to top [T]"><span>Back to top</span></a></li>                    </ul>
                </div>
            </div>
        </div><!-- /wrapper -->


<!-- ********** FOOTER ********** -->
<div id="dokuwiki__footer"><div class="pad">
    <div class="license">Except where otherwise noted, content on this wiki is licensed under the following license: <bdi><a href="http://www.gnu.org/licenses/fdl-1.3.html" rel="license" class="urlextern">GNU Free Documentation License 1.3</a></bdi></div>
    <div class="buttons">
        <a href="http://www.gnu.org/licenses/fdl-1.3.html" rel="license"><img src="css/gnufdl.png" alt="GNU Free Documentation License 1.3"></a>        <a href="http://www.dokuwiki.org/donate" title="Donate"><img src="css/button-donate.gif" alt="Donate" height="15" width="80"></a>
        <a href="http://www.php.net/" title="Powered by PHP"><img src="css/button-php.gif" alt="Powered by PHP" height="15" width="80"></a>
        <a href="http://validator.w3.org/check/referer" title="Valid HTML5"><img src="css/button-html5.png" alt="Valid HTML5" height="15" width="80"></a>
        <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3" title="Valid CSS"><img src="css/button-css.png" alt="Valid CSS" height="15" width="80"></a>
        <a href="http://dokuwiki.org/" title="Driven by DokuWiki"><img src="css/button-dw.png" alt="Driven by DokuWiki" height="15" width="80"></a>
    </div>
</div></div><!-- /footer -->

    </div></div><!-- /site -->

    <div class="no"><img src="css/indexer.gif" alt="" height="1" width="2"></div>
    <div id="screen__mode" class="no"></div>    <!--[if ( lte IE 7 | IE 8 ) ]></div><![endif]-->


</body></html>